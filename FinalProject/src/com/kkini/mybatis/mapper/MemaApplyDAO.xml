<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org/DTD Mapper 3.0/EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.kkini.mybatis.IMemaApplyDAO">

	<!-- 모집정보 띄워주기 위한 쿼리 -->
	<select id="getMemaApplyInfo" resultType="java.util.HashMap">
		 SELECT RESTNAME, REGION, FOODCTG, AGEGROUP, GENDER, MAINMENU, MENUPRICE, VISITDATE, DEADLINE, 
       	 PARTYMEMBERCOUNT, NOP, PARTYMASTER, ATTENDSCORE, ISCLOSED, OPENKEYWORD, OPENCODE
		 FROM MM_LIST_VIEW
		 WHERE OPENCODE = #{openCode}
	</select>
	
	<!-- 지원자가 지원하기 클릭 시, 인서트되는 쿼리 -->
	<select id="memaApply" parameterType="com.kkini.dto.MemaDTO" statementType="CALLABLE">
		{CALL PRC_MM_APPLY_INSERT(
			  #{openCode, mode=IN,jdbcType=VARCHAR}
			, #{userCode, mode=IN,jdbcType=VARCHAR} 
			, SYSDATE
			)}
	</select>

</mapper>